<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    

    <link href="../../main_css/main_body_css/img/favicon.png" rel="icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">

    <!-- Bootstrap CSS File -->
    <!-- To return to the original css delete the _copy --> 
    <link href="../../main_css/nav_bar_css/lib/bootstrap/css/bootstrap.min_copy.css" rel="stylesheet">

    <!-- Libraries CSS Files -->
    <link href="../../main_css/nav_bar_css/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="../../main_css/nav_bar_css/lib/animate/animate.min.css" rel="stylesheet">
    <link href="../../main_css/nav_bar_css/lib/ionicons/css/ionicons.min.css" rel="stylesheet">

    <!-- Main Stylesheet File -->
    <link href="../../main_css/nav_bar_css/css/style.css" rel="stylesheet">
    <style>
        .body {
            display: flex;
            flex-direction: column;
            gap: 20px; /* Add space between flex items */
        }
    
    </style>
    
</head>
<body>
    <!--/ Form Search start /-->
    <div class="box-collapse">
        <div class="title-box-d">
          <h3 class="title-d">Search Property</h3>
        </div>
        <span class="close-box-collapse right-boxed ion-ios-close"></span>
        <div class="box-collapse-wrap form">
          <form class="form-a">
            <div class="row">
              <div class="col-md-12 mb-2">
                <div class="form-group">
                  <label for="Type">Name</label>
                  <input type="text" class="form-control form-control-lg form-control-a" placeholder="Keyword">
                </div>
              </div>
              <div class="col-md-12 mb-2">
                <div class="form-group">
                  <label for="Creator">Content Creator</label>
                  <input type="text" class="form-control form-control-lg form-control-a" placeholder="Keyword">
                </div>
              </div>
              <div class="col-md-12 mb-2">
                <div class="form-group">
                  <label for="Type">Type</label>
                  <select class="form-control form-control-lg form-control-a" id="Type">
                    <option>Gaming</option>
                    <option>Education</option>
                    <option>Relax</option>
                    <option>Music</option>
                    <option>Fashion</option>
                    <option>Cooking</option>
                  </select>
                </div>
              </div>
              
              <div class="col-md-12">
                <button type="submit" class="btn btn-b">Search</button>
              </div>
            </div>
          </form>
        </div>
    </div>
      <!--/ Form Search End /-->
    
      <!--/ Nav Star /-->
      <nav class="navbar navbar-default navbar-trans navbar-expand-lg fixed-top">
        <div class="container">
          <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarDefault"
            aria-controls="navbarDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <a class="navbar-brand text-brand" href="/">Block<span class="color-b">Chain</span></a>
          <button type="button" class="btn btn-link nav-search navbar-toggle-box-collapse d-md-none" data-toggle="collapse"
            data-target="#navbarTogglerDemo01" aria-expanded="false">
            <span class="fa fa-search" aria-hidden="true"></span>
          </button>
          <div class="navbar-collapse collapse justify-content-center" id="navbarDefault">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="/">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/about">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/main">Streams</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/login">Sign In</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/register">Sign UP</a>
              </li>
            </ul>
          </div>
          <button type="button" class="btn btn-b-n navbar-toggle-box-collapse d-none d-md-block" data-toggle="collapse"
            data-target="#navbarTogglerDemo01" aria-expanded="false">
            <span class="fa fa-search" aria-hidden="true"></span>
          </button>
        </div>
      </nav>
      <!--/ Nav End /-->
      
    <!--/ Intro Single star /-->
        <section class="intro-single">
            <div class="container">
            <div class="row">
                <div class="col-md-12 col-lg-8">
                <div class="title-single-box">
                    <h1 class="title-single">Upload Video</h1>
                </div>
                </div>  
            </div>
            </div>
        </section>
    <!--/ Intro Single End /-->

    <!--/ News Grid Star /-->
    <form id="upload-form" action="/api/upload" method="post" enctype="multipart/form-data">
        <section class="icon-wrap grid">
            <div class="container body">
                <div class="input-div">
                    <div class="main-title">
                        <h6>Video Title</h6>
                     </div>
                    <input type="text" name="title" placeholder="Video Title" id="e1" class="form-control">
                 </div>
                 <div class="input-div">
                    <div class="main-title">
                        <h6>About</h6>
                     </div>
                     <textarea rows="3" id="e2" name="about" class="form-control" placeholder="Description"></textarea>
                 </div>
                 
                 <div class="input-div">
                    <div class="main-title">
                        <h6>Video File</h6>
                     </div>
                     <input type="file" class="file" name="video" accept="video/*" required>
                </div>
                <div class="input-div"></div>
                <div class="row ">
                    <div class="col-lg-12">
                          <h6>Category ( you can select upto 6 categories )</h6>
                    </div>
                 </div>
                 <div class="row category-checkbox">
                    <!-- checkbox 1col -->
                    <div class="col-lg-2 col-xs-6 col-4">
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">Abaft</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck2">
                          <label class="custom-control-label" for="customCheck2">Brick</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck3">
                          <label class="custom-control-label" for="customCheck3">Purpose</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck4">
                          <label class="custom-control-label" for="customCheck4">Shallow</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck5">
                          <label class="custom-control-label" for="customCheck5">Spray</label>
                       </div>
                    </div>
                    <!-- checkbox 2col -->
                    <div class="col-lg-2 col-xs-6 col-4">
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="zcustomCheck1">
                          <label class="custom-control-label" for="zcustomCheck1">Cemetery</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="zcustomCheck2">
                          <label class="custom-control-label" for="zcustomCheck2">Trouble</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="zcustomCheck3">
                          <label class="custom-control-label" for="zcustomCheck3">Pin</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="zcustomCheck4">
                          <label class="custom-control-label" for="zcustomCheck4">Fall</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="zcustomCheck5">
                          <label class="custom-control-label" for="zcustomCheck5">Leg</label>
                       </div>
                    </div>
                    <!-- checkbox 3col -->
                    <div class="col-lg-2 col-xs-6 col-4">
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="czcustomCheck1">
                          <label class="custom-control-label" for="czcustomCheck1">Scissors</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="czcustomCheck2">
                          <label class="custom-control-label" for="czcustomCheck2">Stitch</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="czcustomCheck3">
                          <label class="custom-control-label" for="czcustomCheck3">Agonizing</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="czcustomCheck4">
                          <label class="custom-control-label" for="czcustomCheck4">Rescue</label>
                       </div>
                       <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="czcustomCheck5">
                          <label class="custom-control-label" for="czcustomCheck5">Quiet</label>
                       </div>
                    </div>
                </div>    
            <div class="row" id="videoList">
            </div>
            </div>
            <button type="submit" class="btn btn-primary">Upload</button>  
        </section>
      </form>
        

    <!--/ News Grid End /-->

    <!-- JavaScript Libraries -->
    <script src="../../main_css/nav_bar_css/lib/jquery/jquery.min.js"></script>
    <script src="../../main_css/nav_bar_css/lib/jquery/jquery-migrate.min.js"></script>
    <script src="../../main_css/nav_bar_css/lib/popper/popper.min.js"></script>
    <script src="../../main_css/nav_bar_css/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../main_css/nav_bar_css/lib/easing/easing.min.js"></script>
    <script src="../../main_css/nav_bar_css/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="../../main_css/nav_bar_css/lib/scrollreveal/scrollreveal.min.js"></script>
    <!-- Contact Form JavaScript File -->
    <script src="../../main_css/nav_bar_css/contactform/contactform.js"></script>

    <!-- Template Main Javascript File -->
    <script src="../../main_css/nav_bar_css/js/main.js"></script>
    <script src="../upload_vid_files/upload_back.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
    const uploadButton = document.querySelector('button.btn-outline-primary');
    const fileInput = document.querySelector('input[type="file"]');
    const titleInput = document.getElementById('e1');
    const descriptionInput = document.getElementById('e2');
    const checkboxes = document.querySelectorAll('.custom-control-input');

    uploadButton.addEventListener('click', function(event) {
        event.preventDefault();

        // Validate form fields
        if (!fileInput.files.length) {
            alert('Please select a video file.');
            return;
        }
        if (!titleInput.value.trim()) {
            alert('Please enter a title for the video.');
            return;
        }
        if (!descriptionInput.value.trim()) {
            alert('Please provide a description.');
            return;
        }

        // Collect selected categories
        let selectedCategories = [];
        checkboxes.forEach(function(checkbox) {
            if (checkbox.checked) {
                selectedCategories.push(checkbox.labels[0].innerText);
            }
        });

        if (selectedCategories.length === 0) {
            alert('Please select at least one category.');
            return;
        } else if (selectedCategories.length > 6) {
            alert('You can select up to 6 categories only.');
            return;
        }

        // Create FormData object to send the file and data
        let formData = new FormData();
        formData.append('video', fileInput.files[0]);
        formData.append('title', titleInput.value.trim());
        formData.append('description', descriptionInput.value.trim());
        formData.append('categories', JSON.stringify(selectedCategories));

        // Send POST request to the server
        fetch('/api/upload', {
            method: 'POST',
            body: formData
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Failed to upload video. Please try again.');
            }
            return response.json();
        })
        .then(data => {
            alert('Video uploaded successfully!');
            // Redirect or perform other actions as needed
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred during the upload: ' + error.message);
        });
    });
});

    </script>
</body>

</html>
